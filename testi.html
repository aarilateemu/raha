<!DOCTYPE html>
<html>
<head>
<title>PrototestiAJAX</title>
  <meta charset="utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script>
$(document).ready(function(){
    var wrapper=$(".questions");
    function getTextBox(question) {
        var field = "<input type="+text+" id="+qId+" name="+question +" /input>";
        $(wrapper).append(field);
    
        return field;
        
    }
    
    
    
    
    $("#plaa").click(function(){
		var data = [{}];
		
		
		$.ajax({
		  type: 'GET',
		  url: 'http://proto355.haaga-helia.fi:8080/questionnaire-course-project/questionnaire/question',
		  crossDomain: true,
		  async: false,
		  contentType: 'application/json; charset=utf-8',
		  dataType: 'json',
		  success: function (data) {
			  
			$.each(data, function(i, field){
				console.log(data[i].questionTypeId);
           console.log(data[i].question);
            console.log(data[i].oaOption);
            
             if (data[i].questionTypeId == 1) {
            var testi2 = getTextBox(data.question[i]);
          
            }
               
        /*$("#testi").text("Hello world!");*/
				//console.log(data);
				//tässä sitten rivikohtainen käsittely saaduille tuloksille, jonka jälkeen heitetään alemmalla rivillä koko paska rivi kerrallaan lomakkeelle
                //$(".kysymyksetesimerkiks").append(field + " ");
				
(function () {
    var old = console.log;
    var logger = document.getElementById('log');
    console.log = function () {
      for (var i = 0; i < arguments.length; i++) {
        if (typeof arguments[i] == 'object') {
            logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(arguments[i], undefined, 2) : arguments[i]) + '<br />';
        } else {
            logger.innerHTML += arguments[i] + '<br />';
        }
      }
    }
})();
               
               i++
            });
		  },
		 // error: function(xhr, statusText, err){
			// alert("Error:" + xhr.status); 
    //}
		    //error: function(data) { console.log(data.responseText, data); }
		});
    });
    });
    

</script>
</head>
<body>


<a href="#" id="plaa">Get JSON data</a>
  <p>HUOM! Toimii vain koulun verkossa, tietokanta/protopalvelin ongelmista johtuen.</p>
<pre id="log"></pre>

<p id="questions"></p>

</body>
</html>

